(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){e.exports=a(261)},142:function(e,t,a){},259:function(e,t,a){},261:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),s=a.n(r),c=(a(142),a(50)),l=a(20),i=a(263),m=a(73),u=a.n(m),b=a(14),p=a(23),f=a(24),d=a(31),h=a(29),g=a(45),j=a(30),O=a(262),y=a(265),v={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:16},sm:{span:16}}},E={labelCol:{xs:{span:6},sm:{span:6}},wrapperCol:{xs:{span:14},sm:{span:14}}},w=O.a.Item,k=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).onSubmit=function(e){e.preventDefault();var t=Object(g.a)(a),n=t.stores.conn,o=t.props.form,r=o.getFieldsValue().message;n.send(JSON.stringify({type:0,message:r})),o.setFieldsValue({message:""})},a}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form;return o.a.createElement(c.a,null,o.a.createElement(O.a,{onSubmit:this.onSubmit},o.a.createElement(w,Object.assign({label:"message"},v),e.getFieldDecorator("message",{})(o.a.createElement(y.a,null)))))}},{key:"stores",get:function(){return this.props.stores}}]),t}(n.Component),S=Object(b.b)("stores")(Object(b.c)(O.a.create()(k))),I=a(26),C=a(266),M=O.a.Item,_=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).onSubmit=function(e){e.preventDefault();var t=Object(g.a)(a),n=t.stores,o=n.conn,r=n.roomInfo,s=t.props.form;r||C.a.error("You haven't joined a room");var c=s.getFieldsValue().message;o.send(JSON.stringify({type:5,message:c})),s.setFieldsValue({message:""})},a}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form;return o.a.createElement(c.a,null,o.a.createElement(O.a,{onSubmit:this.onSubmit},o.a.createElement(M,Object.assign({label:"message"},E),e.getFieldDecorator("message",{})(o.a.createElement(y.a,null)))))}},{key:"stores",get:function(){return this.props.stores}}]),t}(n.Component),N=Object(b.b)("stores")(Object(b.c)(O.a.create()(_))),F=a(99),R=a.n(F),D=a(134),J=a(101),x=a(264),P={visible:!1,title:"New Modal",destroyOnClose:!0,body:o.a.createElement(function(){return o.a.createElement("div",null,"Body")},null),footer:null},W=function(e){return function(t){function a(){var e,t;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=Object(d.a)(this,(e=Object(h.a)(a)).call.apply(e,[this].concat(o)))).state=Object(J.a)({},P),t._showModal=function(e,a){t.setState(Object(J.a)({visible:!0},e))},t.handleCancel=function(){t.setState({visible:!1})},t.modal={show:t._showModal,close:t.handleCancel},t}return Object(j.a)(a,t),Object(f.a)(a,[{key:"render",value:function(){var t=this.state,a=t.body,r=Object(D.a)(t,["body"]);return o.a.createElement(n.Fragment,null,o.a.createElement(e,Object.assign({},this.props,{modal:this.modal})),o.a.createElement(x.a,Object.assign({},r,{onCancel:this.handleCancel}),a))}}]),a}(n.Component)},L=a(11),A=O.a.Item,z=function(){return o.a.createElement("div",null,o.a.createElement(i.a,{title:"Private Room"},o.a.createElement(B,null),o.a.createElement(V,null),o.a.createElement(N,null)))},B=Object(b.b)("stores")(Object(b.c)(function(e){var t=e.stores,a=t.conn,n=t.roomInfo;return o.a.createElement("div",{className:R.a["button-join-area"]},o.a.createElement(I.a,{onClick:function(){n?a.send(JSON.stringify({type:3})):a.send(JSON.stringify({type:1}))},type:"primary"},n?"Leave room":"Quick join"),o.a.createElement(H,null),o.a.createElement("div",null,n&&o.a.createElement("span",{style:{paddingLeft:14}},"roomId: ",n.roomId)))})),V=Object(b.b)("stores")(Object(b.c)(function(e){var t=e.stores.roomMessages;return o.a.createElement("div",{className:R.a["chat-body"]},Object(L.l)(t).map(function(e,t){return o.a.createElement("li",{key:"mess-".concat(t)},e.message)}))})),H=W(Object(b.b)("stores")(Object(b.c)(function(e){var t=e.stores,a=e.modal;return t.roomInfo?o.a.createElement(o.a.Fragment,null):o.a.createElement(I.a,{onClick:function(){a.show({title:"Input Room Code",body:o.a.createElement(q,null)})},type:"primary",style:{marginLeft:24}},"Join room")}))),q=Object(b.b)("stores")(Object(b.c)(O.a.create()(function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).onSubmitForm=function(e){e.preventDefault();var t=a.props,n=t.form,o=t.stores;n.validateFields(["code"],function(e,t){e||(console.log("values: ",t),o.conn.send(JSON.stringify({type:7,roomId:t.code})))})},a}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form;return o.a.createElement(O.a,{onSubmit:this.onSubmitForm},o.a.createElement(A,Object.assign({label:"code"},v),e.getFieldDecorator("code",{rules:[{type:"string",required:!0,whitespace:!0,message:"Code could not be empty"}]})(o.a.createElement(y.a,null))),o.a.createElement(A,null,o.a.createElement(c.a,{type:"flex",justify:"center"},o.a.createElement(I.a,{htmlType:"submit",type:"primary"},"JOIN"))))}}]),t}(n.Component)))),G=function(){return o.a.createElement(c.a,null,o.a.createElement(l.a,{span:16},o.a.createElement(c.a,null,o.a.createElement(l.a,{span:4,className:u.a["left-side"]},o.a.createElement(Q,null)),o.a.createElement(l.a,{span:20},o.a.createElement(T,null)))),o.a.createElement(l.a,{span:8},o.a.createElement(z,null)))},Q=function(){return o.a.createElement("div",null,o.a.createElement(i.a,{title:"OnlineUsers"},"none"))},T=Object(b.b)("stores")(Object(b.c)(function(e){var t=e.stores.messages;return o.a.createElement("div",{className:u.a["left-side"]},o.a.createElement(i.a,{title:"Messages"},o.a.createElement("div",{className:u.a["chat-body"]},Object(L.l)(t).map(function(e,t){return o.a.createElement("li",{key:"mess-".concat(t)},e.message)})),o.a.createElement(S,null)))})),U=(a(259),Object(b.b)("stores")(Object(b.c)(function(e){return e.stores.loadingWS?o.a.createElement("div",null,"Loading..."):o.a.createElement(G,null)})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y,$,K,X,Z,ee=a(57),te=a(34),ae=(a(260),new(Y=function(){function e(){Object(p.a)(this,e),Object(ee.a)(this,"loadingWS",$,this),Object(ee.a)(this,"messages",K,this),Object(ee.a)(this,"roomMessages",X,this),Object(ee.a)(this,"roomInfo",Z,this),this.conn=void 0;var t=new WebSocket("ws://localhost:8080/ws");t.onmessage=this.onListenMessage.bind(this),t.onclose=function(e){console.log("connection close"),console.log("evt: ",e)},this.conn=t,this.loadingWS=!1}return Object(f.a)(e,[{key:"onListenMessage",value:function(e){try{var t=JSON.parse(e.data);switch(t.type){case 2:this.joinRoom(t);break;case 4:this.leaveRoom(t);break;case 6:console.log("message from room: ",t),this.roomMessages.push(t);break;default:this.messages.push(t)}}catch(a){console.log("failed while listening message: ",a)}}},{key:"pushMessage",value:function(e){this.messages.push(e)}},{key:"joinRoom",value:function(e){var t=e.roomId;this.roomInfo={roomId:t},this.pushMessage(e)}},{key:"leaveRoom",value:function(e){this.roomInfo=void 0,this.pushMessage(e)}}]),e}(),$=Object(te.a)(Y.prototype,"loadingWS",[L.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),K=Object(te.a)(Y.prototype,"messages",[L.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=Object(te.a)(Y.prototype,"roomMessages",[L.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=Object(te.a)(Y.prototype,"roomInfo",[L.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(te.a)(Y.prototype,"pushMessage",[L.b],Object.getOwnPropertyDescriptor(Y.prototype,"pushMessage"),Y.prototype),Object(te.a)(Y.prototype,"joinRoom",[L.b],Object.getOwnPropertyDescriptor(Y.prototype,"joinRoom"),Y.prototype),Object(te.a)(Y.prototype,"leaveRoom",[L.b],Object.getOwnPropertyDescriptor(Y.prototype,"leaveRoom"),Y.prototype),Y));s.a.render(o.a.createElement(b.a,{stores:ae},o.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},73:function(e,t,a){e.exports={"left-side":"Home_left-side__29fAD","chat-body":"Home_chat-body__18Gfp"}},99:function(e,t,a){e.exports={"chat-body":"PrivateRoom_chat-body__1nm_7","button-join-area":"PrivateRoom_button-join-area__1PEB0"}}},[[137,1,2]]]);
//# sourceMappingURL=main.94a7b9d9.chunk.js.map